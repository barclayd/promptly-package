---
title: Endpoints
description: Complete reference for all Promptly CMS REST API endpoints.
---

import { Tabs, TabItem, Aside } from '@astrojs/starlight/components';

All endpoints require a Bearer token in the `Authorization` header. See [API Overview](/api/overview/) for authentication details.

## GET /prompts/:promptId

Fetch a single prompt by ID.

### Path parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `promptId` | `string` | Yes | The prompt ID from the CMS |

### Query parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `version` | `string` | No | Specific version to fetch (e.g. `1.0.0`). Defaults to latest published version. |

### Example requests

<Tabs>
  <TabItem label="curl">
  ```bash
  # Fetch latest version
  curl https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj \
    -H "Authorization: Bearer pk_live_..."

  # Fetch specific version
  curl "https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj?version=2.0.0" \
    -H "Authorization: Bearer pk_live_..."
  ```
  </TabItem>
  <TabItem label="fetch">
  ```typescript
  // Fetch latest version
  const response = await fetch(
    'https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj',
    {
      headers: { Authorization: 'Bearer pk_live_...' },
    },
  );
  const prompt = await response.json();

  // Fetch specific version
  const versioned = await fetch(
    'https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj?version=2.0.0',
    {
      headers: { Authorization: 'Bearer pk_live_...' },
    },
  );
  ```
  </TabItem>
  <TabItem label="Python">
  ```python
  import requests

  headers = {"Authorization": "Bearer pk_live_..."}

  # Fetch latest version
  response = requests.get(
      "https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj",
      headers=headers,
  )
  prompt = response.json()

  # Fetch specific version
  response = requests.get(
      "https://api.promptlycms.com/prompts/JPxlUpstuhXB5OwOtKPpj",
      headers=headers,
      params={"version": "2.0.0"},
  )
  ```
  </TabItem>
</Tabs>

### Response

```json
{
  "promptId": "JPxlUpstuhXB5OwOtKPpj",
  "promptName": "Code Review Helper",
  "version": "2.0.0",
  "systemMessage": "You are a helpful code reviewer.",
  "userMessage": "Review this ${language} code:\n${code}",
  "config": {
    "model": "claude-sonnet-4.5",
    "temperature": 0.7,
    "schema": [],
    "inputData": null,
    "inputDataRootName": null
  }
}
```

### Response fields

| Field | Type | Description |
|-------|------|-------------|
| `promptId` | `string` | The prompt ID |
| `promptName` | `string` | Human-readable prompt name |
| `version` | `string` | The resolved version number |
| `systemMessage` | `string` | System message content |
| `userMessage` | `string` | User message template with `${variable}` placeholders |
| `config.model` | `string` | Model identifier from the CMS |
| `config.temperature` | `number` | Temperature setting (0-2) |
| `config.schema` | `SchemaField[]` | Structured output schema fields (empty if none configured) |
| `config.inputData` | `unknown` | Input data configuration |
| `config.inputDataRootName` | `string \| null` | Root name for input data |
| `publishedVersions` | `PublishedVersion[]` | Available published versions (present when `include_versions` is used on list endpoint) |

<Aside>
  The `userMessage` field contains raw template strings with `${variable}` placeholders. You need to perform string replacement yourself when using the REST API directly. The [SDK](/guides/fetching-prompts/) handles this automatically via the callable `userMessage()` function.
</Aside>

### Full example with the Vercel AI SDK

This example fetches a prompt pinned to a specific version and uses it with `generateText()` from the [Vercel AI SDK](https://ai-sdk.dev/):

```typescript
import { generateText } from 'ai';
import { anthropic } from '@ai-sdk/anthropic';

// Simple helper to replace ${variable} placeholders in template strings
const interpolate = (
  template: string,
  variables: Record<string, string>,
): string => {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    result = result.replaceAll(`\${${key}}`, value);
  }
  return result;
};

// 1. Fetch a prompt pinned to a specific version
const response = await fetch(
  `https://api.promptlycms.com/prompts/${promptId}?version=2.27.0`,
  {
    headers: {
      Authorization: `Bearer ${env.PROMPTLY_API_KEY}`,
    },
  },
);

const { userMessage, systemMessage, config } = await response.json();

// 2. Pass the prompt content to the AI SDK
const { text } = await generateText({
  model: anthropic(config.model),
  messages: [
    {
      role: 'system',
      content: systemMessage,
      providerOptions: {
        anthropic: {
          cacheControl: { type: 'ephemeral' },
        },
      },
    },
    {
      role: 'user',
      content: interpolate(userMessage, {
        pickupLocation,
        movesCount: getMovesCount(),
      }),
    },
  ],
  temperature: config.temperature,
});
```

<Aside type="tip">
  The `interpolate` helper above mirrors what the SDK does internally. If you're using TypeScript, consider using the [SDK](/getting-started/quick-start/) instead - it handles interpolation, model resolution, and type safety automatically.
</Aside>

---

## GET /prompts

Fetch all prompts for your account.

### Query parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `include_versions` | `boolean` | No | Include `publishedVersions` array on each prompt |

### Example requests

<Tabs>
  <TabItem label="curl">
  ```bash
  # List all prompts
  curl https://api.promptlycms.com/prompts \
    -H "Authorization: Bearer pk_live_..."

  # Include version history
  curl "https://api.promptlycms.com/prompts?include_versions=true" \
    -H "Authorization: Bearer pk_live_..."
  ```
  </TabItem>
  <TabItem label="fetch">
  ```typescript
  const response = await fetch('https://api.promptlycms.com/prompts', {
    headers: { Authorization: 'Bearer pk_live_...' },
  });
  const prompts = await response.json();
  ```
  </TabItem>
  <TabItem label="Python">
  ```python
  import requests

  response = requests.get(
      "https://api.promptlycms.com/prompts",
      headers={"Authorization": "Bearer pk_live_..."},
  )
  prompts = response.json()
  ```
  </TabItem>
</Tabs>

### Response

```json
[
  {
    "promptId": "JPxlUpstuhXB5OwOtKPpj",
    "promptName": "Code Review Helper",
    "version": "2.0.0",
    "systemMessage": "You are a helpful code reviewer.",
    "userMessage": "Review this ${language} code:\n${code}",
    "config": {
      "model": "claude-sonnet-4.5",
      "temperature": 0.7,
      "schema": [],
      "inputData": null,
      "inputDataRootName": null
    }
  }
]
```

### Response with versions

When `include_versions=true`:

```json
[
  {
    "promptId": "JPxlUpstuhXB5OwOtKPpj",
    "promptName": "Code Review Helper",
    "version": "2.0.0",
    "systemMessage": "You are a helpful code reviewer.",
    "userMessage": "Review this ${language} code:\n${code}",
    "config": {
      "model": "claude-sonnet-4.5",
      "temperature": 0.7,
      "schema": [],
      "inputData": null,
      "inputDataRootName": null
    },
    "publishedVersions": [
      { "version": "1.0.0", "userMessage": "Review this code:\n${code}" },
      { "version": "2.0.0", "userMessage": "Review this ${language} code:\n${code}" }
    ]
  }
]
```

### Error responses

All endpoints return errors in a consistent format. See [Errors](/api/errors/) for the full reference.

<Tabs>
  <TabItem label="401 Unauthorized">
  ```json
  {
    "error": "Missing or invalid API key",
    "code": "UNAUTHORIZED"
  }
  ```
  </TabItem>
  <TabItem label="404 Not Found">
  ```json
  {
    "error": "Prompt not found",
    "code": "NOT_FOUND"
  }
  ```
  </TabItem>
  <TabItem label="429 Rate Limited">
  ```json
  {
    "error": "Usage limit exceeded",
    "code": "USAGE_LIMIT_EXCEEDED",
    "usage": { "used": 5000, "limit": 5000 },
    "upgradeUrl": "https://app.promptlycms.com/settings?upgrade"
  }
  ```
  </TabItem>
</Tabs>
